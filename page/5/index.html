<!DOCTYPE html>













<html class="theme-next gemini" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
      
    
    
      
    
  <script src="//cdn.staticfile.org/pace/1.0.2/pace.min.js"></script>
  <link rel="stylesheet" href="//cdn.staticfile.org/pace/1.0.2/themes/blue/pace-theme-loading-bar.min.css">

















  
  
    
  
  <link rel="stylesheet" href="//cdn.staticfile.org/fancybox/3.2.5/jquery.fancybox.min.css">




  
  
  
  

  

  

  

  

  
    

    
  

  
    
    
    <link rel="stylesheet" href="https://fonts.loli.net/css?family=Source Code Pro:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext">
  






  

<link rel="stylesheet" href="//cdn.staticfile.org/font-awesome/4.6.2/css/font-awesome.min.css">

<link rel="stylesheet" href="/css/main.css?v=6.7.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=6.7.0">


  <link rel="mask-icon" href="/logo.svg?v=6.7.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.7.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    fastclick: true,
    lazyload: true,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="爱折腾的技术宅一枚">
<meta name="keywords" content="cocobear blog python linux">
<meta property="og:type" content="website">
<meta property="og:title" content="可可熊D窝">
<meta property="og:url" content="http://cocobear.github.io/page/5/index.html">
<meta property="og:site_name" content="可可熊D窝">
<meta property="og:description" content="爱折腾的技术宅一枚">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="可可熊D窝">
<meta name="twitter:description" content="爱折腾的技术宅一枚">



  <link rel="alternate" href="/atom.xml" title="可可熊D窝" type="application/atom+xml">




  <link rel="canonical" href="http://cocobear.github.io/page/5/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>可可熊D窝 – Keep it simple, stupid</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">可可熊D窝</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">Keep it simple, stupid</h1>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签<span class="badge">182</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类<span class="badge">8</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档<span class="badge">358</span></a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cocobear.github.io/2010/09/21/pyfetion-2010/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cocobear">
      <meta itemprop="description" content="爱折腾的技术宅一枚">
      <meta itemprop="image" content="http://ww1.sinaimg.cn/small/72b1593dly1fyhtve330uj20ca0ca78u.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="可可熊D窝">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2010/09/21/pyfetion-2010/" class="post-title-link" itemprop="url">PyFetion 2010</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表</span>
              

              
                
              

              <time title="创建时间：2010-09-21 15:14:13" itemprop="dateCreated datePublished" datetime="2010-09-21T15:14:13+08:00">2010-09-21</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Life/" itemprop="url" rel="index"><span itemprop="name">Life</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2010/09/21/pyfetion-2010/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2010/09/21/pyfetion-2010/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-symbolscount">
              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数：</span>
                
                <span title="字数">12k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读 &asymp;</span>
                
                <span title="阅读">11 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>年初就看到飞信更新新的版本，但是原来的版本还是照常能用，就一直没理它，最近2008版本的协议据说很多地方用不了，抽空更新了一下PyFetion。移动官方于2010年9月15号发布了飞信2010正式版，所以新的PyFetion也将基于这个版本实现。</p>
<p>网上飞信的实现很多，不过很多要不是不开源，要不是实现过于麻烦；用 Python写这个飞信，的目的是为了方便一些用户订制，把飞信的功能折腾进自己的程序里、部署在服务器上做一些好玩的东西。</p>
<p>很多网上的飞信实现了<a href="http://xxx.xx.xx/api?p=136xxxxxxxx&amp;pw=xxxx&amp;t=136xxx&amp;sms=hello这样的WEB接口，" target="_blank" rel="noopener">http://xxx.xx.xx/api?p=136xxxxxxxx&amp;pw=xxxx&amp;t=136xxx&amp;sms=hello这样的WEB接口，</a> 为了安全起见大家在使用这样的接口的时候还是要多加留心。其实在dreamhost之类支持Python的主机上部署一个Python的应用还是很方便的，GAE上使用HTTP方式也是可以的。</p>
<p>svn更新记录：<br><a href="http://code.google.com/p/pytool/source/detail?r=83" target="_blank" rel="noopener">http://code.google.com/p/pytool/source/detail?r=83</a><br>打包下载：<br><a href="http://code.google.com/p/pytool/downloads/list" target="_blank" rel="noopener">http://code.google.com/p/pytool/downloads/list</a></p>
<p>大概试了一下登录，发送消息，收消息都可以。还有不太完善的地方我会慢慢修正。</p>
<h2 id="Comments"><a href="#Comments" class="headerlink" title="Comments"></a>Comments</h2><p><strong><a href="#9069" title="2010-12-10 15:26:03">feiyezi</a>:</strong> 我有两个号码，怎么一个号码可以登陆成功，另外一个号码却登陆失败，提示位 register failed ,这不是在登陆的时候需要验证码，而是在注册的时候那段code 跑到step 2的时候失败，郁闷啊！</p>
<p><strong><a href="#8670" title="2010-10-03 16:19:38">磁县论坛</a>:</strong> 用的不错</p>
<p><strong><a href="#9032" title="2010-12-03 16:42:31">helen</a>:</strong> 你好，我用你这个PyFetion，发送给我自己没问题，但是发送给别人，别人就接收不到，是不是那些人不是我的飞信好友就无法接收？还是那些人也要开通飞信？</p>
<p><strong><a href="#8624" title="2010-09-26 11:13:50">cocobear</a>:</strong> 移动的飞信</p>
<p><strong><a href="#8649" title="2010-09-29 23:14:42">小康</a>:</strong> 这个也不是怎么好用</p>
<p><strong><a href="#9031" title="2010-12-03 15:25:31">七月和五月</a>:</strong> 接收电脑来的信息时反应慢为什么呀，有没有解决办法？ 官方的版本，收到信息时只有一个包过来，直接就是M开头的，就是信息了，为什么pyhton版的要收两个发两下还不行呢，M开头包是过来的晚还是，过来了，处理的慢？</p>
<p><strong><a href="#8620" title="2010-09-25 22:23:58">小康</a>:</strong> 这是什么东西？</p>
<p><strong><a href="#8618" title="2010-09-25 13:38:56">cocobear</a>:</strong> To: Sutra 上传了加密的C代码，你可以自己编译一下。我 这里没有MAC的环境。</p>
<p><strong><a href="#8983" title="2010-11-23 17:55:18">yjmade</a>:</strong> r91 GAE遇到同上错误 : ApplicationError: 5 Traceback (most recent call last): File “/base/data/home/apps/yjfetion/1.346417405917402291/try.py”, line 16, in main() File “/base/data/home/apps/yjfetion/1.346417405917402291/try.py”, line 7, in main if fe.login(FetionOnline): File “/base/data/home/apps/yjfetion/1.346417405917402291/PyFetion.py”, line 840, in login if not self.<strong>get_uri(): File “/base/data/home/apps/yjfetion/1.346417405917402291/PyFetion.py”, line 1336, in </strong>get_uri ret = http_send(url,login=True) File “/base/data/home/apps/yjfetion/1.346417405917402291/PyFetion.py”, line 654, in http_send conn = urllib2.urlopen(request) File “/base/python_runtime/python_dist/lib/python2.5/urllib2.py”, line 124, in urlopen return _opener.open(url, data) File “/base/python_runtime/python_dist/lib/python2.5/urllib2.py”, line 381, in open response = self._open(req, data) File “/base/python_runtime/python_dist/lib/python2.5/urllib2.py”, line 399, in _open ‘_open’, req) File “/base/python_runtime/python_dist/lib/python2.5/urllib2.py”, line 360, in _call_chain result = func(*args) File “/base/python_runtime/python_dist/lib/python2.5/urllib2.py”, line 1115, in https_open return self.do_open(httplib.HTTPSConnection, req) File “/base/python_runtime/python_dist/lib/python2.5/urllib2.py”, line 1080, in do_open r = h.getresponse() File “/base/python_runtime/python_dist/lib/python2.5/httplib.py”, line 197, in getresponse self._allow_truncated, self._follow_redirects) File “/base/python_runtime/python_lib/versions/1/google/appengine/api/urlfetch.py”, line 241, in fetch return rpc.get_result() File “/base/python_runtime/python_lib/versions/1/google/appengine/api/apiproxy_stub_map.py”, line 527, in get_result return self.__get_result_hook(self) File “/base/python_runtime/python_lib/versions/1/google/appengine/api/urlfetch.py”, line 331, in _get_fetch_result raise DownloadError(str(err))</p>
<p><strong><a href="#8601" title="2010-09-22 14:24:49">Sutra</a>:</strong> 用了个 so 呀，Mac OS X上失败了： OSError: dlopen(./RSA_Encrypt.so, 6): no suitable image found. Did find: ./RSA_Encrypt.so: unknown file type, first eight bytes: 0x7F 0x45 0x4C 0x46 0x01 0x01 0x01 0x00</p>
<p><strong><a href="#8605" title="2010-09-23 20:15:14">不做愤青</a>:</strong> 这里有没有大神 在gae上使用过这个库？到底能不能用啊？我在gae上 用pyfetion0.3，本地测试都好用的，一部署到gae上就不行了。。。高人啊。。。给个demo吧。。。</p>
<p><strong><a href="#8598" title="2010-09-22 09:00:27">草儿</a>:</strong> coco最近一直在忙这个？都不见你上线了</p>
<p><strong><a href="#9246" title="2010-12-17 15:05:09">YY</a>:</strong> 不能增加和删除好友，每次做这个操作就出现提示如下，log文件我发到你邮箱了 PyFetion:del 15874141747 删除15874141747失败 PyFetion:add 13574162826 添加13574162826失败</p>
<p><strong><a href="#8779" title="2010-10-12 21:14:48">liuyp</a>:</strong> 刚刚试过还是不能登录，“登录失败“，如果密码不对则”手机号密码错误“，用svn checkout 的代码也不行。</p>
<p><strong><a href="#8592" title="2010-09-21 16:16:21">可可熊</a>:</strong> 现在可以登录了吗？是没有输入验证码的问题吧？</p>
<p><strong><a href="#9089" title="2010-12-13 12:21:49">可可熊</a>:</strong> 需要是好友才可以发</p>
<p><strong><a href="#8591" title="2010-09-21 16:06:56">ybyygu</a>:</strong> 前边没输上 “飞信发现您本次变更了登录地点。为保证您的帐号安全，需要您输入验证码，这可以防止恶意程序的自动登录。”</p>
<p><strong><a href="#8590" title="2010-09-21 16:06:26">ybyygu</a>:</strong> 还是登录不了: Line:822 Fun:login Register Failed!</p>
<p><strong><a href="#8854" title="2010-10-26 22:35:45">simon</a>:</strong> Debian 4.3.2-1.1 File “fetion.py”, line 450, in sys.exit(main()) File “fetion.py”, line 406, in main ret = phone.login(FetionOnline) File “/home/nako521/PyFetion/PyFetion.py”, line 820, in login response = self.<strong>register(self._ssic,self._domain) File “/home/nako521/PyFetion/PyFetion.py”, line 1269, in </strong>register self.get(“REG”,step,response) File “/home/nako521/PyFetion/PyFetion.py”, line 222, in get response = self.<strong>RSA_Encrypt(plain,len(plain),a2b_hex(key[:-6]),a2b_hex(key[-6:])) File “/home/nako521/PyFetion/PyFetion.py”, line 608, in </strong>RSA_Encrypt crypto_handler = ctypes.cdll.LoadLibrary(lib) File “/usr/lib/python2.5/ctypes/<strong>init</strong>.py”, line 431, in LoadLibrary return self._dlltype(name) File “/usr/lib/python2.5/ctypes/<strong>init</strong>.py”, line 348, in <strong>init</strong> self._handle = _dlopen(self._name, mode) OSError: ./RSA_Encrypt.so: wrong ELF class: ELFCLASS32 Mac OS: Traceback (most recent call last): File “fetion.py”, line 450, in sys.exit(main()) File “fetion.py”, line 406, in main ret = phone.login(FetionOnline) File “/Users/Simon/PyFetion/PyFetion.py”, line 820, in login response = self.<strong>register(self._ssic,self._domain) File “/Users/Simon/PyFetion/PyFetion.py”, line 1269, in </strong>register self.get(“REG”,step,response) File “/Users/Simon/PyFetion/PyFetion.py”, line 222, in get response = self.<strong>RSA_Encrypt(plain,len(plain),a2b_hex(key[:-6]),a2b_hex(key[-6:])) File “/Users/Simon/PyFetion/PyFetion.py”, line 608, in </strong>RSA_Encrypt crypto_handler = ctypes.cdll.LoadLibrary(lib) File “/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/ctypes/<strong>init</strong>.py”, line 423, in LoadLibrary return self._dlltype(name) File “/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/ctypes/<strong>init</strong>.py”, line 345, in <strong>init</strong> self._handle = _dlopen(self._name, mode) OSError: dlopen(./RSA_Encrypt.so, 6): no suitable image found. Did find: ./RSA_Encrypt.so: unknown file type, first eight bytes: 0x7F 0x45 0x4C 0x46 0x01 0x01 0x01 0x00</p>
<p><strong><a href="#8975" title="2010-11-22 15:27:29">cocobear</a>:</strong> 最新的R90版本 使用Python的RSA实现。 GAE上请使用HTTP方式登录。GAE我也不太熟 这个错误我没看明白是怎么回事。</p>
<p><strong><a href="#8976" title="2010-11-22 16:24:13">杯具阿</a>:</strong> 大哥，有错： Traceback (most recent call last): File “w.py”, line 38, in fetion.logout() File “/dev/shell/python/PyFetion.py”, line 864, in logout self.send() File “/dev/shell/python/PyFetion.py”, line 407, in send raise PyFetionSocketError(405,’http stoped’) PyFetion.PyFetionSocketError: (405, ‘http stoped’)</p>
<p><strong><a href="#8906" title="2010-11-10 11:35:54">ihipop</a>:</strong> 请问如何让消息可以换行呢？ 我使用pyfetion0.3 + nagios实现短信预警，可是发现不支持\n换行符，这样发来的短信很难看</p>
<p><strong><a href="#8904" title="2010-11-09 17:13:51">the729</a>:</strong> 不能登录啊。 =====&gt;=====登录失败 就是这样。我自己在mac上编译了那个so，用_DEBUG也试过，不是so的问题应该。 我还移植了前面说的<a href="http://stuvel.eu/rsa的库，如果你感兴趣给我邮件，不过问题是我现在登录不了啊。。。。" target="_blank" rel="noopener">http://stuvel.eu/rsa的库，如果你感兴趣给我邮件，不过问题是我现在登录不了啊。。。。</a></p>
<p><strong><a href="#8970" title="2010-11-21 21:46:34">wbchn</a>:</strong> 发现SVN中新的版本 r89 缺少了下面的语句： from uuid import uuid1 在GAE上还是不能正常使用： ret = phone.login(FetionHidden) File “/base/data/home/apps/wb<em>**</em>354066065519429/PyFetion.py”, line 838, in login if not self.<strong>get_uri(): File “/base/data/home/apps/wbch＊＊＊＊＊nweb/1-50.346354066065519429/PyFetion.py”, line 1334, in </strong>get_uri ret = http_send(url,login=True) File “/base/data/home/apps/wbc＊＊＊＊.3463065519＊＊＊＊＊429/PyFetion.py”, line 652, in http_send conn = urllib2.urlopen(request) File “/base/python_runtime/python_dist/lib/python2.5/urllib2.py”, line 124, in urlopen return _opener.open(url, data) File “/base/python_runtime/python_dist/lib/python2.5/urllib2.py”, line 381, in open response = self._open(req, data) File “/base/python_runtime/python_dist/lib/python2.5/urllib2.py”, line 399, in _open ‘_open’, req) File “/base/python_runtime/python_dist/lib/python2.5/urllib2.py”, line 360, in _call_chain result = func(*args) File “/base/python_runtime/python_dist/lib/python2.5/urllib2.py”, line 1115, in https_open return self.do_open(httplib.HTTPSConnection, req) File “/base/python_runtime/python_dist/lib/python2.5/urllib2.py”, line 1080, in do_open r = h.getresponse() File “/base/python_runtime/python_dist/lib/python2.5/httplib.py”, line 197, in getresponse self._allow_truncated, self._follow_redirects) File “/base/python_runtime/python_lib/versions/1/google/appengine/api/urlfetch.py”, line 241, in fetch return rpc.get_result() File “/base/python_runtime/python_lib/versions/1/google/appengine/api/apiproxy_stub_map.py”, line 527, in get_result return self.__get_result_hook(self) File “/base/python_runtime/python_lib/versions/1/google/appengine/api/urlfetch.py”, line 331, in _get_fetch_result raise DownloadError(str(err)) 不知道您的邮件地址，只能 在这儿给您留言了。</p>
<p><strong><a href="#8732" title="2010-10-05 13:37:11">abalest</a>:</strong> 一直用可可熊的pyfetion，以前做了个gae应用。不过已经好久不能在gae上登录飞信了，这次的这个2010可以部署在gae上么？ 看到有个dll文件，这个gae上有作用么？</p>
<p><strong><a href="#8960" title="2010-11-18 22:34:34">gbate</a>:</strong> 放到GAE上出错，不懂！ 11-18 06:30AM 32.554 /_ah/xmpp/message/chat/ 500 4600ms 120cpu_ms 2kb 0.1.0.10 - - [18/Nov/2010:06:30:37 -0800] “POST /_ah/xmpp/message/chat/ HTTP/1.1” 500 2326 - - “sms2laopo.appspot.com” ms=4600 cpu_ms=120 api_cpu_ms=0 cpm_usd=0.003732 loading_request=1 E 11-18 06:30AM 37.118 ApplicationError: 5 Traceback (most recent call last): File “/base/python_runtime/python_lib/versions/1/google/appengine/ext/webapp/<strong>init</strong>.py”, line 513, in <strong>call</strong> handler.post(<em>groups) File “/base/data/home/apps/sms2laopo/1.346306055953622693/gtalk.py”, line 19, in post fetion.login(FetionOnline) File “/base/data/home/apps/sms2laopo/1.346306055953622693/PyFetion.py”, line 792, in login if not self.<strong>get_uri(): File “/base/data/home/apps/sms2laopo/1.346306055953622693/PyFetion.py”, line 1306, in </strong>get_uri ret = http_send(url,login=True) File “/base/data/home/apps/sms2laopo/1.346306055953622693/PyFetion.py”, line 634, in http_send conn = urllib2.urlopen(request) File “/base/python_runtime/python_dist/lib/python2.5/urllib2.py”, line 124, in urlopen return _opener.open(url, data) File “/base/python_runtime/python_dist/lib/python2.5/urllib2.py”, line 381, in open response = self._open(req, data) File “/base/python_runtime/python_dist/lib/python2.5/urllib2.py”, line 399, in _open ‘_open’, req) File “/base/python_runtime/python_dist/lib/python2.5/urllib2.py”, line 360, in _call_chain result = func(</em>args) File “/base/python_runtime/python_dist/lib/python2.5/urllib2.py”, line 1115, in https_open return self.do_open(httplib.HTTPSConnection, req) File “/base/python_runtime/python_dist/lib/python2.5/urllib2.py”, line 1080, in do_open r = h.getresponse() File “/base/python_runtime/python_dist/lib/python2.5/httplib.py”, line 197, in getresponse self._allow_truncated, self._follow_redirects) File “/base/python_runtime/python_lib/versions/1/google/appengine/api/urlfetch.py”, line 241, in fetch return rpc.get_result() File “/base/python_runtime/python_lib/versions/1/google/appengine/api/apiproxy_stub_map.py”, line 527, in get_result return self.__get_result_hook(self) File “/base/python_runtime/python_lib/versions/1/google/appengine/api/urlfetch.py”, line 331, in _get_fetch_result raise DownloadError(str(err)) DownloadError: ApplicationError: 5 I 11-18 06:30AM 37.153 This request caused a new process to be started for your application, and thus caused your application code to be loaded for the first time. This request may thus take longer and use more CPU than a typical request for your application.</p>
<p><strong><a href="#8959" title="2010-11-18 20:52:17">wjy5200</a>:</strong> 刚刚试了一下，一直提示“登录失败“，</p>
<p><strong><a href="#8811" title="2010-10-20 09:33:48">邯郸征婚</a>:</strong> 再来看看 ~~</p>
<p><strong><a href="#8957" title="2010-11-18 09:02:54">邢台征婚</a>:</strong> 丫真懒，多久也不来一次</p>
<p><strong><a href="#8940" title="2010-11-16 23:35:11">flyingzl</a>:</strong> 恩，提示登入错误……</p>
<p><strong><a href="#8947" title="2010-11-17 13:03:59">shector</a>:</strong> 从另一个python实现加上PKCS1填充改出来的，patch见<a href="http://code.google.com/p/pytool/issues/detail?id=26#c8" target="_blank" rel="noopener">http://code.google.com/p/pytool/issues/detail?id=26#c8</a> 不过GAE上还是没搞定……</p>
<p><strong><a href="#8771" title="2010-10-06 15:58:42">不做愤青</a>:</strong> 这个貌似也不能gae上用。。。</p>
<p><strong><a href="#9726" title="2011-03-15 11:46:55">可可熊</a>:</strong> 获取隐身的这个功能估计是被封掉了，协议更新了</p>
<p><strong><a href="#8932" title="2010-11-16 15:01:30">NikeAirMax</a>:</strong> 都没有用过飞信，我是不是OUT了啊</p>
<p><strong><a href="#8884" title="2010-11-04 18:32:30">ayanamist</a>:</strong> 不能部署到GAE上的同学，可以看看这个：<a href="http://stuvel.eu/rsa，接口和楼主的是一样的，自己做一下代码迁移吧。虽然说纯Python的代码效率不高，不过总比没有强" target="_blank" rel="noopener">http://stuvel.eu/rsa，接口和楼主的是一样的，自己做一下代码迁移吧。虽然说纯Python的代码效率不高，不过总比没有强</a></p>
<p><strong><a href="#8928" title="2010-11-15 18:05:15">vinsonlv</a>:</strong> <a href="http://stuvel.eu/rsa" target="_blank" rel="noopener">http://stuvel.eu/rsa</a> 这个没有做PKCS1填充，要自己改</p>
<p><strong><a href="#8927" title="2010-11-15 17:11:25">邢台征婚</a>:</strong> 很久没来了</p>
<p><strong><a href="#8774" title="2010-10-08 17:24:16">邯郸征婚</a>:</strong> 还是老板的好用，我到现在也没换。</p>
<p><strong><a href="#9262" title="2010-12-18 23:50:33">YY</a>:</strong> 今天又测试了下，由官方飞信加一个手机为好友，fetion.py运行时没有任何提示的。</p>
<p><strong><a href="#9263" title="2010-12-19 00:18:27">YY</a>:</strong> 还发现一个问题，当我开fetion.py，然后本机开一个官方飞信，之间互为好友，然后用fetion.py向官方飞信发送消息这个很快很正常，可是如果我用官方飞信向fetion.py发送消息时，fetion.py要显示收到的消息总是有一个很长的延时。如果两边都用官方的飞信发送是没有这种问题的，这个我猜跟socket的线程处理有关，麻烦你看看。</p>
<p><strong><a href="#9364" title="2010-12-29 20:51:25">pt</a>:</strong> 请问怎么使用.. 我装好python后，打开feiton.py，输入帐号密码，读取了一下很快就不见了.还没看清是什么</p>
<p><strong><a href="#10173" title="2011-05-22 15:00:42">可可熊</a>:</strong> 没有测试邮箱申请的号。本来就只是为向手机发短信用的，所以就没考虑邮箱。</p>
<p><strong><a href="#9306" title="2010-12-23 15:42:00">ihipop</a>:</strong> <a href="http://code.google.com/p/pytool/issues/detail?id=46" target="_blank" rel="noopener">http://code.google.com/p/pytool/issues/detail?id=46</a></p>
<p><strong><a href="#9932" title="2011-05-02 13:44:21">寒塘雁迹</a>:</strong> 测试发现如下问题 用两个飞信号，一个是用移动的手机号注册的飞信，另一个是用邮箱注册的飞信，pyfetion登陆的是手机注册的那个，然后互相发送信息。 用pyfetion向官方客户端发送信息可以正常的发送 但是用官方的向pyfetion发送信息就接收不到，不知道这个是什么原因，难道用邮箱注册的飞信不好用么？</p>
<p><strong><a href="#9644" title="2011-02-22 16:14:10">爱好者</a>:</strong> 获取隐身信息出错,这个功能不好用，怎么回事啊？</p>
<p><strong><a href="#9678" title="2011-03-02 15:37:39">珠</a>:</strong> 。。。。。</p>
<p><strong><a href="#9755" title="2011-03-21 09:05:08">cocobear</a>:</strong> 在命令行下执行 不要直接双击 有可能是有出错提示</p>
<p><strong><a href="#9744" title="2011-03-18 14:58:22">vccv</a>:</strong> 请问这个如何使用，为什么闪一下就什么都没有了，连账号和密码都不能输入</p>
<p><strong><a href="#13492" title="2012-03-28 23:44:00">jack</a>:</strong> linux 下如何输入验证码？</p>
<p><strong><a href="#13494" title="2012-03-29 00:04:35">cocobear</a>:</strong> 只能找个查看图片的来看一下图片。</p>
<p><strong><a href="#18051" title="2012-11-28 12:14:29">LLco</a>:</strong> coco熊啊，飞信2012年11月28日又来了一个升级（<a href="http://feixin.10086.cn/bulletin/2856/），pyfetion报错：" target="_blank" rel="noopener">http://feixin.10086.cn/bulletin/2856/），pyfetion报错：</a> Traceback (most recent call last): File “fetion.py”, line 438, in sys.exit(main()) File “fetion.py”, line 394, in main ret = phone.login(FetionOnline) File “D:\Program Files\Python26\PyFetion\PyFetion.py”, line 811, in login response = self.<strong>register(self._ssic,self._domain) File “D:\Program Files\Python26\PyFetion\PyFetion.py”, line 1268, in </strong>registe r self.get(“REG”,2,response) File “D:\Program Files\Python26\PyFetion\PyFetion.py”, line 212, in get nonce = re.search(‘nonce=”(.+?)”‘,extra[0]).group(1) AttributeError: ‘NoneType’ object has no attribute ‘group’ 我看了一下，返回的error信息： Line:441 Fun:send response:SIP-C/4.0 410 Gone F: 964421729 I: 1 Q: 1 R 是410Gone，是不是他们改服务器地址了？</p>
<p><strong><a href="#18055" title="2012-11-28 15:49:15">cocobear</a>:</strong> 新版本已经更新，就是服务器的地址变了。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cocobear.github.io/2010/09/16/update-pyfetion-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cocobear">
      <meta itemprop="description" content="爱折腾的技术宅一枚">
      <meta itemprop="image" content="http://ww1.sinaimg.cn/small/72b1593dly1fyhtve330uj20ca0ca78u.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="可可熊D窝">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2010/09/16/update-pyfetion-2/" class="post-title-link" itemprop="url">PyFetion更新</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表</span>
              

              
                
              

              <time title="创建时间：2010-09-16 17:35:22" itemprop="dateCreated datePublished" datetime="2010-09-16T17:35:22+08:00">2010-09-16</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Life/" itemprop="url" rel="index"><span itemprop="name">Life</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2010/09/16/update-pyfetion-2/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2010/09/16/update-pyfetion-2/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-symbolscount">
              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数：</span>
                
                <span title="字数">1.4k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读 &asymp;</span>
                
                <span title="阅读">1 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>更新说明：</p>
<p>原引援引移动官方网站的说明：</p>
<pre><code>尊敬的用户：&gt; 
为了提升飞信系统安全性，于2010年7月25日起，飞信平台将停止对3.3及以下的低版本PC客户端提供支持，您将无法使用3.3及以下的低版本PC客户端登录飞信。您可以访问飞信官网下载频道http://feixin.10086.cn/download/下载并安装最新版本PC客户端后再次尝试登录。&gt; 
对此给您带来的不便我们深表歉意，期待您一如既往的关注飞信！&gt; 

飞信官方网站&gt; 
2010-07-19
</code></pre><p>原引我飞信发布说明：</p>
<pre><code>PyFetion?新版本发布，协议根据移动09.11.04的飞信版本：Fetion2008 3.5.2(安全加强版)
</code></pre><p>也就是说08版本的飞信还是能用的，（大家可以试着用08版的官方客户端登录一下）包括原有的登录验证方式，之所以这段时间不能用是移动增加了一个新的登录验证地址：<a href="https://uid.fetion.com.cn/ssiportal/SSIAppSignInV2.aspx，移动官方是使用XML的方式来传递这个参数，他们是新下传了一个ssi-app-sign-in-v2，我的程序没有很详细的分析XML，所以出错，现在解决的办法就是把PyFetion.py里面的" target="_blank" rel="noopener">https://uid.fetion.com.cn/ssiportal/SSIAppSignInV2.aspx，移动官方是使用XML的方式来传递这个参数，他们是新下传了一个ssi-app-sign-in-v2，我的程序没有很详细的分析XML，所以出错，现在解决的办法就是把PyFetion.py里面的</a><br>     self.<strong>sipc_url   = “<a href="https://uid.fetion.com.cn/ssiportal/SSIAppSignIn.aspx&quot;" target="_blank" rel="noopener">https://uid.fetion.com.cn/ssiportal/SSIAppSignIn.aspx&quot;</a><br>改为：<br>     self.</strong>sipc_url   = “<a href="https://uid.fetion.com.cn/ssiportal/SSIAppSignInV2.aspx&quot;" target="_blank" rel="noopener">https://uid.fetion.com.cn/ssiportal/SSIAppSignInV2.aspx&quot;</a></p>
<p>一切正常。</p>
<p>收到好多邮件，还有博客上的留言，不过最近其它的事情比较多，而且很多人直接说都得换新协议了，所以怕没时间整，今天抽空看了下，发现没那么严重，我一向认为移动还是没腾讯那么狠的。</p>
<p>请移步：<a href="http://code.google.com/p/pytool/source/detail?r=79" target="_blank" rel="noopener">http://code.google.com/p/pytool/source/detail?r=79</a></p>
<p>PS：<br>amoblin同学修改的主要是针对Linux平台，所以我另外放了一个目录。<br>tanjelly同学的修改我就删掉了，新的协议似乎整的加密算法太多了，其实安全这个东西，没那么严重:-)</p>
<p>PS：<br>刚测试发现登录的时候密码简单要求输入验证码，以前只有官方客户端才要求输入，现在看来是强制了，我一会儿再改一下代码，把验证码存起来。但是还是建议改一具复杂点的密码，不然每次输入验证码可就惨了。</p>
<h2 id="Comments"><a href="#Comments" class="headerlink" title="Comments"></a>Comments</h2><p><strong><a href="#8980" title="2010-11-23 09:02:56">柠檬园主</a>:</strong> 登录地点变更了也要验证了，这点没折了。。。 在本地测试完了放服务器上IP肯定变了，然后就不能用了。。。。</p>
<p><strong><a href="#8586" title="2010-09-21 08:09:22">小管哥</a>:</strong> 现在需要输入验证码，那不是用不了</p>
<p><strong><a href="#8564" title="2010-09-16 17:47:12">donglongchao</a>:</strong> 不错。</p>
<p><strong><a href="#8565" title="2010-09-16 18:15:39">Sutra</a>:</strong> 好，马上试试。 另外，这个是不是别字？ 原引 -&gt; 援引</p>
<p><strong><a href="#8566" title="2010-09-16 18:27:57">可可熊</a>:</strong> 多谢指正，怪不得我打词组打不出来:-(</p>
<p><strong><a href="#8567" title="2010-09-16 22:48:01">rex</a>:</strong> 不错，这次更新时间挺长呀，估计必定有不少改进。下载用一下:)</p>
<p><strong><a href="#8581" title="2010-09-20 20:58:30">小康</a>:</strong> 学习了，支持下</p>
<p><strong><a href="#8573" title="2010-09-19 08:56:21">草儿</a>:</strong> 我还是感觉移动比腾讯狠，只是在飞信这块儿他没必要太狠而已</p>
<p><strong><a href="#8588" title="2010-09-21 15:16:49">可可熊</a>:</strong> 楼上： 可以用的，用新版本的，支持输入验证码，不过最好还是改个复杂点的密码，这样就不用老输入密码。 <a href="http://code.google.com/p/pytool/downloads/list" target="_blank" rel="noopener">http://code.google.com/p/pytool/downloads/list</a></p>
<p><strong><a href="#8775" title="2010-10-08 17:26:41">邯郸征婚</a>:</strong> 。。。。。。。飞信呀，爱死你了</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cocobear.github.io/2010/08/17/everybody-is-lonely/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cocobear">
      <meta itemprop="description" content="爱折腾的技术宅一枚">
      <meta itemprop="image" content="http://ww1.sinaimg.cn/small/72b1593dly1fyhtve330uj20ca0ca78u.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="可可熊D窝">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2010/08/17/everybody-is-lonely/" class="post-title-link" itemprop="url">每个人都是孤独的</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表</span>
              

              
                
              

              <time title="创建时间：2010-08-17 18:26:58" itemprop="dateCreated datePublished" datetime="2010-08-17T18:26:58+08:00">2010-08-17</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Life/" itemprop="url" rel="index"><span itemprop="name">Life</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2010/08/17/everybody-is-lonely/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2010/08/17/everybody-is-lonely/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-symbolscount">
              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数：</span>
                
                <span title="字数">622</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读 &asymp;</span>
                
                <span title="阅读">1 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>每个人都是孤独的<br>不管你的身边有多少朋友<br>有多少知心的朋友<br>有多少情人<br>有多少知心的爱人<br>虽然他们很了解你<br>但是你还是会觉得很独孤<br>你的大脑每时每刻都会有新的细胞在生成<br>他们怎么会懂得你呢</p>
<p>有些人害怕孤独<br>交很多的朋友<br>找一个个的爱人<br>但有时候你却恨不得把脑袋放在Ta的脖子上让Ta明白你的想法</p>
<p>你做不到，所以Ta们不会懂得你<br>你只能继续忍受孤独<br>如果你不能忍受<br>你可以选择释向迦牟尼，耶稣，穆罕默德倾诉<br>你至少可以让自己相信他们是懂你的</p>
<p>当你在工作的时候 孤独的面对着一行行的代码<br>当你在下班的路上 孤独的穿梭在一堆堆的人群<br>当你在餐馆的大厅 孤独的满足着一个个的味蕾<br>当你在宁静的夜晚 孤独的咀嚼着一页页的书本<br>当你在热闹的聚会 孤独的欣赏着一串串的表演<br>当你在两人的世界 孤独的揣猜着一件件的琐事</p>
<p>每个人有自己的痛苦 没人能懂得你的痛楚<br>每个人有自己的喜悦 没人能理解你的快乐<br>每个人有自己的爱 没人会有和你一样的感受 即使是你爱着的人</p>
<h2 id="Comments"><a href="#Comments" class="headerlink" title="Comments"></a>Comments</h2><p><strong><a href="#8460" title="2010-08-26 19:38:23">wind</a>:</strong> 啧啧，居然这么诗阿。。。。。 强悍</p>
<p><strong><a href="#8431" title="2010-08-17 21:34:17">草儿</a>:</strong> coco竟然学会写诗了</p>
<p><strong><a href="#8433" title="2010-08-18 09:55:35">luguo</a>:</strong> DP成湿人了。。。 话说，孤独是心灵的猎手～！</p>
<p><strong><a href="#8480" title="2010-09-03 00:33:03">crazyfranc</a>:</strong> 还是没做到对自己内心的绝对坦诚，孤独需要面对</p>
<p><strong><a href="#8542" title="2010-09-13 15:07:56">小康</a>:</strong> 我又来看看</p>
<p><strong><a href="#8497" title="2010-09-06 16:21:24">小康</a>:</strong> 很有含义</p>
<p><strong><a href="#8526" title="2010-09-10 08:46:36">学夫子</a>:</strong> 人，可以独立，但是不能孤立</p>
<p><strong><a href="#8502" title="2010-09-06 20:42:57">NikeAirMax</a>:</strong> 看完都陷入孤独情绪中了……</p>
<p><strong><a href="#8873" title="2010-10-31 23:53:34">kongove</a>:</strong> 又发现一个孤独的人。。</p>
<p><strong><a href="#9714" title="2011-03-11 17:39:33">asics walker</a>:</strong> 独立着并快乐着。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cocobear.github.io/2010/08/03/update-pyfetion/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cocobear">
      <meta itemprop="description" content="爱折腾的技术宅一枚">
      <meta itemprop="image" content="http://ww1.sinaimg.cn/small/72b1593dly1fyhtve330uj20ca0ca78u.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="可可熊D窝">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2010/08/03/update-pyfetion/" class="post-title-link" itemprop="url">最近PyFetion不能登录-已更新</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表</span>
              

              
                
              

              <time title="创建时间：2010-08-03 11:18:29" itemprop="dateCreated datePublished" datetime="2010-08-03T11:18:29+08:00">2010-08-03</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/编程相关/" itemprop="url" rel="index"><span itemprop="name">编程相关</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2010/08/03/update-pyfetion/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2010/08/03/update-pyfetion/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-symbolscount">
              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数：</span>
                
                <span title="字数">683</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读 &asymp;</span>
                
                <span title="阅读">1 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://code.google.com/p/pytool/issues/detail?id=18" target="_blank" rel="noopener">tanjelly</a>同学更新了PyFetion，原因是移动对认证方式的一些小的变化，并不是以前的协议完全不可以用了。具体的细节可以参考上面的连接。</p>
<p>google code的Issue怎么没有邮件通知呢？还是别人发邮件我才知道的:-(</p>
<h2 id="Comments"><a href="#Comments" class="headerlink" title="Comments"></a>Comments</h2><p><strong><a href="#8402" title="2010-08-09 09:24:39">cocobear</a>:</strong> 似乎是因为你手机登录的次数过多。</p>
<p><strong><a href="#8394" title="2010-08-06 22:48:25">懒得说话</a>:</strong> 请问一下，在下于GAE上使用手机号登录时遇到421状态，放狗搜了下好像是需要图片验证的，不知道如何解决？</p>
<p><strong><a href="#8432" title="2010-08-18 02:01:10">ice360</a>:</strong> 感谢!</p>
<p><strong><a href="#8385" title="2010-08-03 17:27:12">linzerd</a>:</strong> 刚发现…多谢</p>
<p><strong><a href="#8383" title="2010-08-03 12:32:51">Leo Jay</a>:</strong> 经测试好用。 多谢。 建议这篇blog加上PyFetion的tag。</p>
<p><strong><a href="#8384" title="2010-08-03 15:26:40">草儿</a>:</strong> 已远离飞信好多年。。。 现在在用协同办公，感觉还不错</p>
<p><strong><a href="#8556" title="2010-09-15 11:32:43">david</a>:</strong> 你好，我的测试出现了问题，发生了PyFetionSocketError异常，对于print(e.msg)输出了/9j/4AAQ…. 网络通信出错 请检查网络连接，请问如何解决？</p>
<p><strong><a href="#8543" title="2010-09-13 15:29:42">sendou</a>:</strong> 你好，我的测试出现了问题，发生了PyFetionSocketError异常，对于print(e.msg)输出了/9j/4AAQ….网络通信出错 请检查网络连接，请问如何解决？</p>
<p><strong><a href="#8498" title="2010-09-06 16:21:59">小康</a>:</strong> 有时候故障也是一种正常</p>
<p><strong><a href="#8562" title="2010-09-16 17:43:24">可可熊</a>:</strong> 已经更新 2008的协议还是可以用的 <a href="http://cocobear.github.io/2010/09/16/update-pyfetion-2/">http://cocobear.github.io/2010/09/16/update-pyfetion-2/</a></p>
<p><strong><a href="#8516" title="2010-09-09 19:51:34">tofuliang</a>:</strong> 请问这个pyfetion在终端下怎么运行啊?</p>
<p><strong><a href="#8513" title="2010-09-09 08:55:39">ayanamist</a>:</strong> 移动昨天已经彻底把2008协议废了，连官方的2008客户端都无法登录了……</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cocobear.github.io/2010/07/17/about-ark/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cocobear">
      <meta itemprop="description" content="爱折腾的技术宅一枚">
      <meta itemprop="image" content="http://ww1.sinaimg.cn/small/72b1593dly1fyhtve330uj20ca0ca78u.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="可可熊D窝">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2010/07/17/about-ark/" class="post-title-link" itemprop="url">方舟相关</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表</span>
              

              
                
              

              <time title="创建时间：2010-07-17 19:57:13" itemprop="dateCreated datePublished" datetime="2010-07-17T19:57:13+08:00">2010-07-17</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Life/" itemprop="url" rel="index"><span itemprop="name">Life</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2010/07/17/about-ark/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2010/07/17/about-ark/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-symbolscount">
              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数：</span>
                
                <span title="字数">337</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读 &asymp;</span>
                
                <span title="阅读">1 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天去西安航天产业园那边儿，过马路被警察叔叔挡住了，原来是温总理视察航天动力后返程，据说这里是给方舟做发动机。BTW：主席去年就来过了，近一年国家领导人已经多次来视察了。请注意今天的新闻里提到温总理来西安，但是没有提到视察航天产业园。</p>
<h2 id="Comments"><a href="#Comments" class="headerlink" title="Comments"></a>Comments</h2><p><strong><a href="#8318" title="2010-07-18 13:27:56">草儿</a>:</strong> 咱是不是也可以走那个小喇嘛他哥哥的路线？</p>
<p><strong><a href="#8312" title="2010-07-17 20:03:23">Amankwah</a>:</strong> 方舟？发动机？</p>
<p><strong><a href="#8315" title="2010-07-17 20:17:13">Iven</a>:</strong> 总理准备上船了？</p>
<p><strong><a href="#8316" title="2010-07-17 21:01:58">luguo</a>:</strong> 你是想去买船票么？</p>
<p><strong><a href="#11438" title="2011-10-24 13:01:35">Sunday</a>:</strong> 求船票啊！！！</p>
<p><strong><a href="#8481" title="2010-09-03 00:35:07">crazyfranc</a>:</strong> 一个月后他来到了深圳软件园，视察一家所谓的“搜索引擎”公司（已被媒体在新闻中改为下载引擎），貌似也是要找方舟的。</p>
<p><strong><a href="#8465" title="2010-08-29 17:14:39">小康</a>:</strong> 真的有方舟存在？</p>
<p><strong><a href="#8912" title="2010-11-12 14:34:08">邯郸小生</a>:</strong> 方舟的发动机？？ 2012用的那个方舟？这不是电影难道是真的？</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/72/">72</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="http://ww1.sinaimg.cn/small/72b1593dly1fyhtve330uj20ca0ca78u.jpg" alt="cocobear">
            
              <p class="site-author-name" itemprop="name">cocobear</p>
              <p class="site-description motion-element" itemprop="description">爱折腾的技术宅一枚</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">358</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">8</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">182</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/cocobear" title="GitHub &rarr; https://github.com/cocobear" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:cocobear.cn@gmail.com" title="E-Mail &rarr; mailto:cocobear.cn@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://twitter.com/_cocobear" title="Twitter &rarr; https://twitter.com/_cocobear" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i>Twitter</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://www.douban.com/people/cocobear/" title="豆瓣 &rarr; https://www.douban.com/people/cocobear/" rel="noopener" target="_blank"><i class="fa fa-fw fa-book"></i>豆瓣</a>
                </span>
              
            </div>
          

          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                友情链接
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://wangcong.org" title="http://wangcong.org" rel="noopener" target="_blank">王聪</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://blog.liu-yang.info/" title="https://blog.liu-yang.info/" rel="noopener" target="_blank">老大</a>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </div>

      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2007 – <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">cocobear</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="站点总字数">519k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="站点阅读时长">7:52</span>
  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v6.7.0</div>



  <div class="footer-custom">Hosted by <a target="_blank" rel="external nofollow" href="https://pages.github.com/">GitHub Pages</a></div>


        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv" title="总访客量">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="site-pv" title="总访问量">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>





  



  






  













  



  
  <script src="//cdn.staticfile.org/jquery/2.1.3/jquery.min.js"></script>

  
  <script src="//cdn.staticfile.org/fastclick/1.0.6/fastclick.min.js"></script>

  
  <script src="//cdn.staticfile.org/jquery.lazyload/1.9.1/jquery.lazyload.min.js"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script src="//cdn.staticfile.org/fancybox/3.2.5/jquery.fancybox.min.js"></script>

  
  <script src="/lib/reading_progress/reading_progress.js"></script>


  


  <script src="/js/src/utils.js?v=6.7.0"></script>

  <script src="/js/src/motion.js?v=6.7.0"></script>



  
  


  <script src="/js/src/affix.js?v=6.7.0"></script>

  <script src="/js/src/schemes/pisces.js?v=6.7.0"></script>



  

  


  <script src="/js/src/bootstrap.js?v=6.7.0"></script>



  



  








  
  
  
  
  <script src="//cdn1.lncld.net/static/js/3.11.1/av-min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js"></script>
  <script>
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(function (item) {
      return GUEST.indexOf(item) > -1;
    });
    new Valine({
      el: '#comments' ,
      verify: false,
      notify: false,
      appId: 'GWpjMXr7BpoLENnXXTFt4QoW-gzGzoHsz',
      appKey: 'yaHPwQTKhDXDPOUNWso3P42n',
      placeholder: '说点啥呢？',
      avatar: 'identicon',
      meta:guest,
      pageSize: '10' || 10,
      visitor: false
    });
  </script>




  

  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      
        // ref: https://github.com/ForbesLindesay/unescape-html
        var unescapeHtml = function(html) {
          return String(html)
            .replace(/&quot;/g, '"')
            .replace(/&#39;/g, '\'')
            .replace(/&#x3A;/g, ':')
            // replace all the other &#x; chars
            .replace(/&#(\d+);/g, function (m, p) { return String.fromCharCode(p); })
            .replace(/&lt;/g, '<')
            .replace(/&gt;/g, '>')
            .replace(/&amp;/g, '&');
        };
      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                content = unescapeHtml(content);
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  

  

  

  
  <script src="/js/src/js.cookie.js?v=6.7.0"></script>
  <script src="/js/src/scroll-cookie.js?v=6.7.0"></script>


  

  

  
  <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #333;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      background-color: #eee;
      background-image: linear-gradient(#fcfcfc, #eee);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
      user-select: none;
      outline: 0;
    }

    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 4px;
      top: 8px;
    }

    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1
    }

    .highlight-wrap {
      position: relative;
    }
  </style>
  <script>
    $('.highlight').each(function (i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap');
      $(e).after($wrap);
      $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function (e) {
        var code = $(this).parent().find('.code').find('.line').map(function (i, e) {
          return $(e).text();
        }).toArray().join('\n');
        var ta = document.createElement('textarea');
        var range = document.createRange(); //For Chrome
        var sel = window.getSelection(); //For Chrome
        var yPosition = window.pageYOffset || document.documentElement.scrollTop;
        ta.style.top = yPosition + 'px'; //Prevent page scroll
        ta.style.position = 'absolute';
        ta.style.opacity = '0';
        ta.value = code;
        ta.textContent = code; //For FireFox
        ta.contentEditable = true;
        ta.readOnly = false;
        document.body.appendChild(ta);
        range.selectNode(ta);
        sel.removeAllRanges();
        sel.addRange(range);
        ta.setSelectionRange(0, code.length);
        var result = document.execCommand('copy');
        
        ta.blur(); //For iOS
        $(this).blur();
      })).on('mouseleave', function (e) {
        var $b = $(this).find('.copy-btn');
        setTimeout(function () {
          $b.text('复制');
        }, 300);
      }).append(e);
    })
  </script>


  

</body>
</html>
