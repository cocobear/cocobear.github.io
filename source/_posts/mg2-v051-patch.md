title: MG2 v0.5.1补丁
id: 200
categories:
  - 编程相关
date: 2007-10-06 22:30:25
tags:
---

前两天给小组找相册程序时发现了[MG2](http://www.minigal.dk/)这个相册，有一种久违了的感觉，这正是我喜欢的风格（无论是操作还是界面）。给小组弄了一个[相册](http://xiyoulinux.cn/album/)，也想给俺弄一个，不过它默认的皮肤是白色的，不适合我的网站。在它的主页找到了黑色皮肤，可惜不能下载，google也没找到那个黑色皮肤的下载。

不过却google到了很多国内MG2网页都在讨论它的一个漏洞，网上都认为是apache的漏洞，因为apache把类似foo.php.foo这样的网页按php类型进行解析，我感觉这个不应该算是apache的漏洞，而且可以通过配置来使apache不解析这种类型的文件，问题在于MG2对留言的内容没有进行检查，这一点很重要的，我在写那个留言板的时候就遇到了这个问题。

我试着用这个漏洞测试了一下我这个主机，发现这个主机对提交含有< ?php ?>这类关键字的内容时会有限制的，而且即使可以提交含有system,exec这类函数的PHP页面，主机也屏蔽了这类函数。（看来DH的安全性还不错。）

我修改了一下，对提交的内容做了个简单的过滤，这下大家可以放心用了。其实还有些地方这个相册做得不太好（都是些小地方），可惜作者在去年这个时候就停止了MG2的更新，本来打算把这个程序更新一下，结果在网上发现了这个程序的一个[扩展](http://www.tangata.de)，做得还不错，就放弃了这个念头。不知道为什么看着那个kh_mod不太爽。目前的MG2对中文相册名支持的不太好，今天中午看了一会儿代码，大概知道了问题出在什么地方，如果不是很复杂的话我会去把这个改改。

后来在[kh_mod](http://www.tangata.de)找到了一款黑色的皮肤，自己修改了一下，现在可以在MG2 v0.5.1上面用了:-)

放出来大家有喜欢的就拿去用吧：

[黑色皮肤](http://cocobear.github.io/download/pbstyle.tar.gz)
[打过补丁的MG2 v0.5.1(含有简体中文语言包)](http://cocobear.github.io/download/mg2_patched_cn.tar.gz)
[补丁](http://cocobear.github.io/download/mg2_functions.patch)
## Comments

**[fresh](#1935 "2007-10-08 15:22:17"):** pig,你是我的偶像;)

**[Amankwah](#1933 "2007-10-07 20:16:28"):** 楼上说的是什么意思？？？？

**[草儿](#1945 "2007-10-10 22:38:51"):** 嗯，不错~

**[luguo](#1928 "2007-10-06 23:31:45"):** 啥都不说了，我还是在看一姑娘～～～～～～～哇哈哈～！

**[kHUI](#2702 "2007-12-19 16:44:43"):** 我的相册KHUI.NET/BLOG/PHOTO

**[kHUI](#2703 "2007-12-19 16:45:11"):** sorry，应该是我的相册KHUI.NET/BLOG/PHOTOs

**[shark](#6730 "2009-11-20 22:34:26"):** 期待你把MG2的中文目录问题以及中文文件名问题解决哦，另外问一下MG2皮肤怎么装上去的？

**[cocobear](#6741 "2009-11-23 09:59:27"):** 我博客里已经解决了中文问题:http://cocobear.github.io/2007/10/12/mg2%E6%9B%B4%E6%96%B0/ 皮肤是放在skins目录下的

