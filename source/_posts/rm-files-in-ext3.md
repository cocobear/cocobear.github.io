title: 不小心rm掉了ext3中的文件
tags:
  - ext3
  - Linux
id: 125
categories:
  - Linux
date: 2007-06-03 20:15:20
---

 装完系统后准备把以前硬盘里的资料移过来，也不知道怎么回事，本来应该是用

	cp -r Picture ~/Picutures

但不知道怎么回事就敲成了rm -r Picture  ~/Pictures  ，在网上找了许多关于误删ext3下的文件的文章，基本上都说无法恢复，只有一两篇文章提到了可以使用扫描整个分区的方法，[有一篇](http://blog.seety.org/everydaywork/2005/3/11/248/)作者自己用python写了一个脚本来搜索，但觉得效率太低，而且也不是很可靠，他也提到只有对ext3文件系统做很深入的了解才能写出更可靠的恢复工具，目前似乎网上没有专门的可以恢复ext3文件系统中文件的工具。

TO：wangcong，你对ext3文件系统了解的怎么样呢？能不能试着写这样的一个工具？

郁闷，幸亏删掉的只是一个Pictures文件夹，也就是自己的一些图片，不是很重要，如果是其它资料那就玩完了:-(

马上在.bashrc文件中加了一句

	alias rm='rm -i'
## Comments

**[名字[必须]](#290 "2007-06-04 13:08:48"):** rm -i也只是提示而已，可以说还不如我说的那个，起码提示选错后还有机会恢复。 如果ext3可以实现这种功能，我想早应该有人做了。可能是出于数据冗余性的考虑，ext3才可能不支持这种恢复。不过你可以自己摸索一下。 BTW：这话题放到我们新闻组上讨论岂不是更好？

**[站长](#291 "2007-06-04 00:27:28"):** 这不是解决办法,防止用rm的话,我上面提到的一个简单的替换就可以了,但是如果这种事发生了怎么办呢? 应该可以恢复的吧?比如windows下就有好多恢复软件,有的功能确实还不错. 为什么直接对ext3进行操作不可取呢?

**[名字[必须]](#292 "2007-06-04 00:25:05"):** 直接对ext3文件系统进行底层操作似乎不可取～

**[名字[必须]](#293 "2007-06-04 00:23:06"):** 沙发先～ 这个问题没通用的解决办法，我想到的一个解决方案是自己写一个脚本来替代rm，其功能如下： 1\. 把要删除的文件放到/tmp目录一个某个固定文件夹中，称之为回收站 2\. 在清空回收站之前给出明显的提示和警告 3\. 提供恢复删除功能 4\. 把rm替换成这个脚本（alias？） 这可以作为小组的一个小项目进行。;)

**[Amankwah](#294 "2007-06-05 09:34:31"):** 哈哈，你也误操作了！看来这个，*nix对用户的信任有点过头了啊～还是要多点提示，人非圣贤，孰能无过！

**[站长](#295 "2007-06-04 21:00:18"):** asdf

**[pcca](#1732 "2007-09-18 13:38:00"):** 建议改用reiserfs, 我一大早就放弃用ext3了, 觉得没有什么用。我就试过samba中的900MB资料不小心被误删了, 结果用reiserfs的自带工具就恢原了99%左右。只有少量档案无法读取出来。

**[cocobear](#1735 "2007-09-18 18:34:00"):** reiserfs不怎么清楚这个文件系统，以后有机会去试试。

**[dream](#2071 "2007-10-22 20:12:30"):** hehe 别忘了备份啊～

