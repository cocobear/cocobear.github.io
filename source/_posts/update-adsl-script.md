title: ADSL脚本更新
id: 97
categories:
  - 编程相关
date: 2007-05-12 09:55:38
tags:
---

1.添加了自动修改/etc/syslog.conf文件，不需要手动更改，使得脚本更方便。
2.分析日志文件时，添加判断eth0是否被激活，未激活的情况下首先激活eth0，不过请确保使用脚本时eth0状态是激活。
3.对pppd进程数目的判断改为在一个循环中查询，更智能一些。
4.当未查询到密码失败时，tailer减一，继续判断该号码。
5.添加判断是否为root权限，非root权限不允许运行脚本。

[查看代码](http://cocobear.github.io/code/html/pppsh.html "shell script")
[下载代码](http://cocobear.github.io/code/ppp.sh "shell script")
## Comments

**[cocobear](#116 "2007-05-12 20:40:05"):** **TO:草儿** 20多个还嫌少啊，你拿来吃啊，要那么多，小心撑死！

**[草儿](#117 "2007-05-12 21:25:29"):** 话不能那么说 之所以想多弄几个 只是为了找几个速度比较快的而已

**[草儿](#118 "2007-05-12 20:13:27"):** 算了吧 上次我挂了一下午 一边看电视 结果才弄了20来个 最郁闷的是大多都是待拆的 而且是512K的

**[草儿](#119 "2007-05-12 19:50:48"):** MS又可以大面积搜索了

**[cocobear](#120 "2007-05-12 19:59:01"):** **TO:草儿** 可以给你修改一下，支持N长号段，这样你可以挂机一天了，不过得收费 :)

**[草儿](#121 "2007-05-15 23:23:23"):** 验证了没？ 如果那样的话还不如上个版本自己修改而不用重启呢

**[cocobear](#122 "2007-05-15 22:08:54"):** 貌似修改完配置文件后需要重起才起？ 郁闷，这样的话……

**[windflush](#123 "2007-05-16 18:51:39"):** MS?什么意思。卖什么吗？

**[草儿](#124 "2007-05-16 17:40:53"):** MS要拉出去QB的

**[cocobear](#125 "2007-05-16 11:49:25"):** **TO:草儿** 确实是这样的，因为我试的时候是以前就改好的那个/etc/syslog.conf文件，所以不存在问题。 其实也没必要重启，只要重启一个syslogd的进程就可以了，我可以在下次修改的时候把这自动重启syslogd加上。

**[草儿](#126 "2007-05-16 21:35:42"):** MS=貌似 QB=枪毙≠Q币

**[草儿](#127 "2007-05-16 13:47:51"):** 呵呵，如果还要继续更新的话，建议直接从页面验证得了 只是不知道是否存在技术难度

**[windflush](#128 "2007-05-16 15:09:30"):** 不知道举报有赏没？

**[cocobear](#129 "2007-05-16 15:16:08"):** **TO:windflush** 欢迎举报，把我的博客人气拉的高一点，我顺便做点Google的广告，赚点小钱花花。

**[windflush](#130 "2007-05-17 15:50:00"):** 也可以这么解释，微软要拉出去q币的，从此微软跑去给腾讯卖q币了

